{"remainingRequest":"/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/babel-loader/lib/index.js!/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/src/components/modals/addCategorie.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/src/components/modals/addCategorie.vue","mtime":1630931188926},{"path":"/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/cache-loader/dist/cjs.js","mtime":1628559051451},{"path":"/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/babel-loader/lib/index.js","mtime":1628559051326},{"path":"/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/cache-loader/dist/cjs.js","mtime":1628559051451},{"path":"/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/node_modules/vue-loader-v16/dist/index.js","mtime":1629188068251}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvY29saW4vQUZQQS9waHAvQXBpIFBsYXRmb3JtL0FwaVBfSldUXzMvYXBpcF9qd3RfM19mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIHRva2VuOiAnZ2V0VG9rZW4nCiAgfSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyh7CiAgICB0b2dnbGVDYXRXYW50ZWQ6ICd0b2dnbGVOZXdDYXRXYW50ZWQnCiAgfSkpLCB7fSwgewogICAgYWRkQ2F0ZWdvcmllOiBmdW5jdGlvbiBhZGRDYXRlZ29yaWUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBXYW50ZWQgOiBjYXRlZ29yeSAKICAgICAgdGhpcy50b2dnbGVDYXRXYW50ZWQoKTsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyB0aGlzLnRva2VuCiAgICAgICAgfQogICAgICB9OyAvLyBjb25zb2xlLmxvZyhjb25maWcpOwoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgbm9tOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbm9tQ2F0ZWdvcmllJykudmFsdWUsCiAgICAgICAgbmJTdWJDYXRlZ29yeTogMAogICAgICB9OwogICAgICBheGlvcy5wb3N0KCdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL2NhdGVnb3JpZXMnLCBkYXRhLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMSkgewogICAgICAgICAgX3RoaXMudG9nZ2xlQ2F0V2FudGVkKCk7CgogICAgICAgICAgX3RoaXMucmVsb2FkQ2F0ZWdvcmllTGlzdCgpOwoKICAgICAgICAgIF90aGlzLmNhbmNlbE1vZGFsKCcjQWRkQ2F0ZWdvcmllTW9kYWwnKTsKCiAgICAgICAgICBfdGhpcy5zaG93TW9kYWwoJyNBZGRDYXRlZ29yaWVTdWNjZXNzTW9kYWwnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBpZiAoZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxICYmIGVyci5yZXNwb25zZS5zdGF0dXNUZXh0ID09ICJVbmF1dGhvcml6ZWQiKSB7CiAgICAgICAgICAgIF90aGlzLmNhbmNlbE1vZGFsKCcjQWRkQ2F0ZWdvcmllTW9kYWwnKTsKCiAgICAgICAgICAgIF90aGlzLnNob3dNb2RhbCgnI0xvZ2luTW9kYWwnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbG9hZENhdGVnb3JpZUxpc3Q6IGZ1bmN0aW9uIHJlbG9hZENhdGVnb3JpZUxpc3QoKSB7CiAgICAgIHRoaXMuJGVtaXQoInJlbG9hZC1jYXRlZ29yaWVzLWxpc3QiKTsKICAgIH0sCiAgICBjYW5jZWxNb2RhbDogZnVuY3Rpb24gY2FuY2VsTW9kYWwobm9tTW9kYWwpIHsKICAgICAgdmFyIG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihub21Nb2RhbCk7CiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgfSwKICAgIHNob3dNb2RhbDogZnVuY3Rpb24gc2hvd01vZGFsKG5vbU1vZGFsKSB7CiAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobm9tTW9kYWwpOwogICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["/home/colin/AFPA/php/Api Platform/ApiP_JWT_3/apip_jwt_3_front/src/components/modals/addCategorie.vue"],"names":[],"mappings":";AAuBA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AAEA,eAAe;AACX,EAAA,QAAQ,oBACD,UAAU,CAAC;AACV,IAAA,KAAK,EAAE;AADG,GAAD,CADT,CADG;AAMX,EAAA,OAAO,kCACA,UAAU,CAAC;AACV,IAAA,eAAc,EAAI;AADR,GAAD,CADV;AAIH,IAAA,YAJG,0BAIW;AAAA;;AAEV;AACA,WAAK,eAAL;AAEA,UAAI,MAAK,GAAI;AACT,QAAA,OAAM,EAAI;AACN,UAAA,aAAa,EAAE,YAAY,KAAK;AAD1B;AADD,OAAb,CALU,CAWV;;AAEA,UAAI,IAAG,GAAI;AACP,QAAA,GAAE,EAAI,QAAQ,CAAC,aAAT,CAAuB,eAAvB,EAAwC,KADvC;AAEP,QAAA,aAAa,EAAE;AAFR,OAAX;AAKA,MAAA,KAAK,CAAC,IAAN,CAAW,sCAAX,EAAmD,IAAnD,EAAyD,MAAzD,EACK,IADL,CACU,UAAA,GAAE,EAAK;AACT,YAAG,GAAG,CAAC,MAAJ,IAAc,GAAjB,EAAqB;AACjB,UAAA,KAAI,CAAC,eAAL;;AACA,UAAA,KAAI,CAAC,mBAAL;;AACA,UAAA,KAAI,CAAC,WAAL,CAAiB,oBAAjB;;AACA,UAAA,KAAI,CAAC,SAAL,CAAe,2BAAf;AACJ;AACH,OARL,EASK,KATL,CASW,UAAA,GAAE,EAAK;AACV,YAAG,GAAG,CAAC,QAAP,EAAgB;AACZ,cAAG,GAAG,CAAC,QAAJ,CAAa,MAAb,KAAwB,GAAxB,IAA+B,GAAG,CAAC,QAAJ,CAAa,UAAb,IAA2B,cAA7D,EAA4E;AACxE,YAAA,KAAI,CAAC,WAAL,CAAiB,oBAAjB;;AACA,YAAA,KAAI,CAAC,SAAL,CAAe,aAAf;AACJ;AACJ;AACH,OAhBL;AAiBH,KAvCE;AAwCH,IAAA,mBAxCG,iCAwCkB;AACjB,WAAK,KAAL,CAAW,wBAAX;AACH,KA1CE;AA2CH,IAAA,WA3CG,uBA2CS,QA3CT,EA2CkB;AACb,UAAI,KAAI,GAAI,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAZ;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,QAApB;AACP,KA9CE;AA+CH,IAAA,SA/CG,qBA+CO,QA/CP,EA+CgB;AACX,UAAI,KAAI,GAAI,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAZ;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,QAAvB;AACP;AAlDE;AANI,CAAf","sourcesContent":["<template>\n    <div class=\"modal h-screen w-full fixed left-0 top-0 flex justify-center items-center bg-black bg-opacity-50\">\n        <!-- modal -->\n        <div class=\"bg-white rounded shadow-lg w-10/12 md:w-1/3\">\n            <!-- modal header -->\n            <div class=\"border-b px-4 py-2 flex justify-between items-center\">\n                <h3 class=\"font-semibold text-lg\">Nouvelle Catégorie</h3>\n                <button @click=\"cancelModal('#AddCategorieModal')\" class=\"text-black close-modal\">&cross;</button>\n            </div>\n            <!-- modal body -->\n            <div class=\"p-3 flex justify-between items-center\">\n                <label for=\"nomCategorie\">Nom de la catégorie</label>\n                <input type=\"text\" id=\"nomCategorie\" class=\"border border-gray-300 rounded p-1\">\n            </div>\n            <div class=\"flex justify-end items-center w-100 border-t p-3\">\n                <button @click=\"cancelModal('#AddCategorieModal')\" class=\"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-white mr-1 close-modal\">Retour</button>\n                <button @click=\"addCategorie\" class=\"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-white\">Ajouter la categorie</button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapActions, mapGetters } from 'vuex';\n\nexport default {\n    computed: {\n        ...mapGetters({\n            token: 'getToken'\n        })\n    },\n    methods: {\n        ...mapActions({\n            toggleCatWanted : 'toggleNewCatWanted'\n        }),\n        addCategorie(){\n\n            // Wanted : category \n            this.toggleCatWanted();\n\n            let config = {\n                headers : {\n                    Authorization: 'Bearer ' + this.token\n                }\n            };\n\n            // console.log(config);\n\n            let data = {\n                nom : document.querySelector('#nomCategorie').value,\n                nbSubCategory: 0\n            };\n\n            axios.post('http://127.0.0.1:8000/api/categories', data, config)\n                .then(res => {\n                    if(res.status == 201){\n                        this.toggleCatWanted();\n                        this.reloadCategorieList();\n                        this.cancelModal('#AddCategorieModal');\n                        this.showModal('#AddCategorieSuccessModal')\n                    }\n                })\n                .catch(err => {\n                    if(err.response){\n                        if(err.response.status === 401 && err.response.statusText == \"Unauthorized\"){\n                            this.cancelModal('#AddCategorieModal')\n                            this.showModal('#LoginModal');\n                        }\n                    }\n                });     \n        },\n        reloadCategorieList(){\n            this.$emit(\"reload-categories-list\");\n        },\n        cancelModal(nomModal){\n                let modal = document.querySelector(nomModal);\n                modal.classList.add('hidden');\n        },\n        showModal(nomModal){\n                let modal = document.querySelector(nomModal);\n                modal.classList.remove('hidden');\n        },\n    }\n}\n</script>"],"sourceRoot":""}]}